<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" type="icon/png" href="img/favicon.png"/>
		<title>Administration - Cow-snack</title>
		<link rel="stylesheet" href="css/unique.css">
		<link rel="stylesheet" href="css/header.css">
		<link rel="stylesheet" href="css/footer.css">
	</head>
	<body id="admin">
		<div class="flex-row align">
			<img src="img/logo.png" class="logoFirst">
			<div class="flex-row align">
				<a href="index.ejs" class="flex-end">
						<div class="bouton">Accueil</div>
				</a>
				<div class="deconnexion">Se déconnecter</div>
			</div>
		</div> 
		
		<h2>Commandes</h2>
		<section id="commandAdmin">

			<div class="topCommand">
				<h3>Nom du client</h3>
				<h3>Nom du Sandwich</h3>
				<h3>Boisson & Dessert</h3>
				<h3>Prix</h3>
				<h3>Date de Livraison</h3>
				<h3>Statut</h3>
			</div>
			<div class="flex-row align commandContainer">
				<div class="suppr"><img src="img/add.png"  class="cruce"></div>
				<div>
					<p>Alexandre Le Gaulois</p>
					<p class="colorSandwich">Cow-Custom</p>
					<div class="popupCustom">
						<div>	
							<img src="img/height.svg"/>
							<p>Small</p>
						</div>
						<div>	
							<img src="img/meat.svg"/>
							<p>Steak Cordon Bleu</p>
						</div>
						<div>	
							<img src="img/salad.svg"/>
							<p>Cheddar Lardons Salade Tomates</p>
						</div>
						<div>	
							<img src="img/sauce-bottle.svg"/>
							<p>Mayonnaise</p>
						</div>						
					</div>
					<p>Orangina / Panini nutella</p>
					<p>3.00€</p>
					<p>Mardi 7 Juin</p>
					<p class="statut">Livré</p>
				</div>
				<div class="paiementValidate">Paiement effectué</div>
				<div class="infos">+
					<div class="infosContainer">
						<p>Yo Seb, est ce que ça serai possible de bien cuire mon steak parce que je suis pas fan de la cuisson au bleu.</p>
					</div>
				</div>
			</div>



			<div class="flex-row align commandContainer">
				<div class="suppr"><img src="img/add.png"  class="cruce"></div>
				<div>
					<p>Alexandre Le Gaulois</p>
					<p class="colorSandwich">Cow-Miam</p>
					<p>Orangina / Panini nutella</p>
					<p>3.00€</p>
					<p>Mardi 7 Juin</p>
					<p class="statut">En cours</p>
				</div>
				<div class="paiementValidate">Paiement effectué</div>
				<div class="infos">+
					<div class="infosContainer">
						<p>J'aimerai si possible avoir une petite part de steak dans mon cow-miam parce que je souhaite pas manger trop lourd et pas beacoup de ketchup aussi parce que un peu c'est bien mais trop c'est moins bien.</p>
					</div>
				</div>
			</div>


			<div class="flex-row align commandContainer">
				<div class="suppr"><img src="img/add.png"  class="cruce"></div>
				<div>
					<p>Alexandre Le Gaulois</p>
					<p class="colorSandwich">Cow-Custom</p>
					<div class="popupCustom">
						<div>	
							<img src="img/height.svg"/>
							<p>Small</p>
						</div>
						<div>	
							<img src="img/meat.svg"/>
							<p>Steak Cordon Bleu</p>
						</div>
						<div>	
							<img src="img/salad.svg"/>
							<p>Cheddar Lardons Salade Tomates</p>
						</div>
						<div>	
							<img src="img/sauce-bottle.svg"/>
							<p>Mayonnaise</p>
						</div>						
					</div>
					<p>Orangina / Panini nutella</p>
					<p>3.00€</p>
					<p>Mardi 7 Juin</p>
					<p class="statut">Annulé</p>
				</div>
				<div class="paiementValidate">Paiement effectué</div>
				<div class="infos">+
					<div class="infosContainer">
						<p>Bonsoir nous somme l'administration français et nous avons été récemment au fait de votre marché noir de sandwich nous vous contactons donc afin de vous demander d'arrêter parce que c'est pas super gentil de pas payer vos taxes et nous on aime l'argent</p>
					</div>
				</div>
			</div>

		</section>

		
		<h2>Stock</h2>
		<h3>Viandes</h3>
			<section class="sectionStock">
				<div class="compteurContainer">
					<div class="dish">
						<div class="dish-img"><img src="img/steak.png"></div>
						<div class="dish-compteur">
							<div class="dish-arrow">						
								<img src="img/top-arrow.png" class="arrowUp">
								<img src="img/bottom-arrow.png" class="arrowDown">
							</div>
							<b>0</b>
						</div>
					</div>
					<div class="compteurBottom">
						<p>Steak</p>
						<div>Besoin:<span class="besoin"> 6</span></div>
						<div class="initBesoin"><img src="img/add.png"  class="cross"></div>
					</div>
				</div>

				<div class="compteurContainer">
					<div class="dish">
						<div class="dish-img"><img src="img/steak.png"></div>
						<div class="dish-compteur">
							<div class="dish-arrow">						
								<img src="img/top-arrow.png" class="arrowUp">
								<img src="img/bottom-arrow.png" class="arrowDown">
							</div>
							<b>0</b>
						</div>
					</div>
					<div class="compteurBottom">
						<p>Steak</p>
						<div>Besoin:<span class="besoin"> 6</span></div>
						<div class="initBesoin"><img src="img/add.png"  class="cross"></div>
					</div>
				</div>
			</section>

			<h3>Suppléments</h3>
			<section>
				
			</section>


			<h3>Sauces</h3>
			<section>
				
			</section>

	<script>

		//flèche de modification des stocks
		let arrowUp = document.querySelectorAll('.arrowUp');
		let arrowDown = document.querySelectorAll('.arrowDown');
		let vari = [];
		
		for(let i=0; i < arrowUp.length; i++){
			vari[i] = 0;
			arrowUp[i].addEventListener('click', function(event){
				vari[i] += 1;
				event.target.parentElement.nextElementSibling.innerHTML = vari[i];
				if (vari[i] >= 10 || vari[i] < 0){
					event.target.parentElement.parentElement.classList.add('extended');
				}
				else {
					event.target.parentElement.parentElement.classList.remove('extended');	
				}
			});
		}

		for(let i=0; i < arrowDown.length; i++){
			arrowDown[i].addEventListener('click', function(event){
				vari[i] -= 1;
				event.target.parentElement.nextElementSibling.innerHTML = vari[i];
			if (vari[i] >= 10  || vari[i] < 0){
					event.target.parentElement.parentElement.classList.add('extended');
			}
			else {
				event.target.parentElement.parentElement.classList.remove('extended');
			}	
			});

				
		}


		//changement de couleur dynamique pour le menu choisi par le client
		let enhance = document.querySelectorAll('.colorSandwich');
		
		for(let i=0; i < enhance.length; i++){
			let content = enhance[i].textContent;
			if(content === "Cow-Custom") {
				enhance[i].classList.toggle('custom');
			}
		}


		//changement de couleur dynamique pour le statut de la livraison
		let statut = document.querySelectorAll('.statut');

		for(let i = 0; i < statut.length; i++){
			let content = statut[i].textContent;
			if(content === "Livré") {
				statut[i].classList.toggle('green');
			} else if (content === "En cours"){
				statut[i].classList.toggle('orange');
			} else if (content === "Annulé"){
				statut[i].classList.toggle('red');
			}

		};


		//passé un sandwich en Livré grâce au bouton paiement effectué
		let payValid = document.querySelectorAll('.paiementValidate');
		
		for(let i=0; i < payValid.length; i++){
			payValid[i].addEventListener('click', function(event){
				event.target.previousElementSibling.querySelector('.statut').classList.toggle('green');
				event.target.previousElementSibling.querySelector('.statut').textContent = 'Livré';
			});
		}







		
		//affichage des ingrédients pour les sandwichs cow-custom
		let customs = document.querySelectorAll('.colorSandwich');

		for (let i = 0; i < customs.length; i++) {
			customs[i].addEventListener('click', function(event){
				if(customs[i].textContent === "Cow-Custom"){
					event.target.nextElementSibling.classList.toggle('custom');
					event.target.classList.toggle('presence');
				}
			});
		}








		//affichage des différents popup d'informations de la clientèle
		let infos = document.querySelectorAll('.infos');

		for (let i = 0; i < infos.length; i++) {
			infos[i].addEventListener('click', function(event){
				event.target.children[0].classList.toggle('open');
			});
		}





		//Réinitialisation des besoins dans la partie stock
		let besoins = document.querySelectorAll('.initBesoin');
		let crosses = document.querySelectorAll('.cross');

		for (let i = 0; i < besoins.length; i++) {
			crosses[i].addEventListener('click', function(event){
				event.target.parentElement.previousElementSibling.children[0].innerText = ' 0';
			});
			besoins[i].addEventListener('click', function(event){
				event.target.previousElementSibling.children[0].innerText = ' 0';
			});
		}





		//disparition du popup de confirmation de suppression
		function cancelCommand(){
			document.querySelector('body').classList.remove('blur');
			document.querySelector('.confirmWindow').remove();
		}

		//suppression de la commande
		function deleteCommand(evt){
			evt.parentElement.parentElement.remove();
		
			cancelCommand();
		}

		//aparition du popup de confirmation de suppression
		function confirm(evt) {

			document.querySelector('body').classList.toggle('blur');	
			let confirm = document.createElement('div');
			let paraConfirm = document.createElement('p');
			let confirmB = document.createElement('div');
			let buttonConfirm = document.createElement('button');
			let buttonDelete = document.createElement('button');
			confirm.className = "confirmWindow";
			confirmB.className = "confirmB";
			buttonConfirm.className = "buttonCancel";
			buttonDelete.className = "buttonDelete";
			buttonConfirm.innerText = "Annuler";
			buttonDelete.innerText = "Supprimer la commande";
			paraConfirm.innerText = "Souhaitez vous supprimer cette commande ?";
			document.querySelector('html').appendChild(confirm);
			confirm.appendChild(paraConfirm);
			confirm.appendChild(confirmB);
			confirmB.appendChild(buttonConfirm);
			confirmB.appendChild(buttonDelete);

			document.querySelector('.buttonDelete').addEventListener('click', function(){
				deleteCommand(evt);
			});
			document.querySelector('.buttonCancel').addEventListener('click', cancelCommand);
		}




		//bouton de suppression d'une commande
		let suppr = document.getElementsByClassName('suppr');
		for(let i = 0; i < suppr.length; i++){
			suppr[i].addEventListener('click', function(event){
				confirm(event.target);
			});
		}	

		</script>
	</body>
</html> 